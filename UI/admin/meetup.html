<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Questioner | User | Login</title>
   <link rel="stylesheet" href="../css/main.css">
   <link rel="stylesheet" href="../css/user/meetup.css">
   <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href="https://fonts.googleapis.com/css?family=Anton" rel="stylesheet">
   <link rel="stylesheet" href="../css/responsive.css">
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
      crossorigin="anonymous">
</head>

<body>
   <div id="loader-overlay">
      <div class="loader"></div>
   </div>

   <header class="header">
      <h1 class="header-logo"><a href="../index.html"><span class="q">Q</span><span class="uestioner">UESTIONER</span>
         </a> </h1>

      <div class="profile"> <a href="#"><img id="dropdown" src="../img/user-avatar.png" alt="">Seyi</a>
         <br> <span class="time" id="currentTime"></span>
      </div>

      <div class="dropdown" id="dropdownNav">
         <ul>
               <li id="adminStatus" > <a href="../user/index.html">USER</a></li>
            <li> <a href="../admin/meetups.html">Meetups</a> </li>
            <li> <a href="../admin-login.html">Logout</a> </li>
         </ul>
      </div>

   </header>


   <section class="container">

      <div class="body-wrapper">
         <div class="container-page">
               <div id="msgAlert">
                   
                  </div>
            <a href="./create_meetup.html" class="submitButton">+ CREATE MEETUP</a>
            <div class="topic-list-header">MEETUP</div>
            <div class="meetup-list">
               <section id="single-meetup-detail">

               </section>


               <br>

               <div class="RSVPdiv">
                  <a href="./edit_meetup.html" class="submitButton">Edit</a>
                  <a href="#" class="cancelButton" id="deleteMeetup">Delete</a>

               </div>

               <div class="details">
                  <h3>Details</h3>
                  <div>

                     You are all invited to the end of year unity 3d game developers meetup.

                     The order of the programme is as follows:
                     <ol>
                        <li> Discussions on unity and unity technologies</li>
                        <li>Panel session with game developers</li>
                        <li>Game developer trainings/events</li>
                        <li>Gaming competitions</li>
                     </ol>

                     <br>

                     Studios/Companies invited to exhibit and make the event fun include:

                     Imisi3D
                     Blackring Studios
                     Deluxe Creation Studios
                     The Creatus

                     Program is set to run between 10:00am - 5:00pm


                  </div>
               </div>
               <hr>
               <h3 class="details">Interested People (12)</h3>
               <section class="attendees">

                  <div class="attend-block">
                     <img class="attendees" src="../img/coming(1).jpeg" alt="">
                     <p>Oluwaseyi</p>
                  </div>
                  <div class="attend-block">
                     <img class="attendees" src="../img/coming (2).jpeg" alt="">
                     <p>Christian</p>
                  </div>
                  <div class="attend-block">
                     <img class="attendees" src="../img/coming (4).jpeg" alt="">
                     <p>Kemi</p>
                  </div>
                  <div class="attend-block">
                     <img class="attendees" src="../img/coming(4).jpg" alt="">
                     <p>Valetyy</p>
                  </div>

               </section>
               <hr>

               <div class="discussion">
                  <h3 class="details">Discussion</h3>

                  <div class="QCDiv">

                     <div class="questionDiv"><span>Question by<a href="#"> Adebajo Oluwaseyi </a>on July 4,
                           2018</span>
                        <br> Not sure if Digital Ocean will prefer me to say this here, but we go through
                        Cloudways
                        to have Digital Ocean instances for web hosting. I can't say enough good things about
                        this
                        setup! DO's performance will blow your doors off compared to typical shared hosting or
                        slow
                        VPS plans. And Cloudways' server config makes management secure and easy. Pricing is
                        gooddd
                        too. Especially compared to AWS and GCE which are crazy high.
                        <p><a href="#"><i class="far fa-comment fa-1x"></i>(0)</a> | <a href="#"><i class="far fa-thumbs-up fa-1x"></i>
                              (4)</a> | <a href="#"><i class="far fa-thumbs-down "></i> (1)</a></p>
                     </div>

                     <div class="commentDiv"><span>Comment by <a href="#">Emmnuel Tega</a> on July 5, 2018</span>
                        <br>
                        good things about this
                        setup! DO's performance will blow your doors off compared to typical shared hosting or
                        slow
                        VPS plans. And Cloudways' server config makes management secure and easy. Pricing is
                        good
                     </div>
                     <div class="commentDiv"><span>Comment by <a href="#">Olaiyiwola Ojo</a> on July 7, 2018</span>
                        <br>
                        good things about this
                        setup! DO's performance will blow your doors off compared to typical shared hosting or
                        slow
                        VPS plans. And Cloudways' server config makes management secure and easy. Pricing is
                        good
                     </div>
                     <div class="commentDiv"><span>Comment by <a href="#">Blessing Emeka </a> on July 8, 2018</span>
                        <br>
                        good things about this
                        setup! DO's performance will blow your doors off compared to typical shared hosting or
                        slow
                        VPS plans. And Cloudways' server config makes management secure and easy. Pricing is
                        good
                     </div>


                  </div>

                  <div class="QCDiv">

                     <div class="questionDiv"><span>Question by<a href="#"> Emeka Onyeneke </a>on July 2, 2018</span>
                        <br> Not sure if Digital Ocean will prefer me to say this here, but we go through
                        Cloudways
                        to have Digital Ocean instances for web hosting. I can't say enough good things about
                        this
                        setup! DO's performance will blow your doors off compared to typical shared hosting or
                        slow
                        VPS plans. And Cloudways' server config makes management secure and easy. Pricing is
                        good
                        too. Especially compared to AWS and GCE which are crazy high.
                        <p><a href="#"><i class="far fa-comment fa-1x"></i>(0)</a> | <a href="#"><i class="far fa-thumbs-up fa-1x"></i>
                              (4)</a> | <a href="#"><i class="far fa-thumbs-down "></i> (1)</a></p>
                     </div>
                  </div>

               </div>
            </div>


         </div>
      </div>
      <aside class="aside margin40">
         <div class="aside-header">
            Upcoming Meetup</div>
         <div class="aside-body">
            <div class="aside-content upcoming-meetup">
               <p><a href="./meetups-stats.html"> Today: <span> 0</span></a></p>
               <p><a href="./meetups-stats.html"> This Week:<span> 23</span></a></p>
               <p><a href="./meetups-stats.html"> This Month:<span> 123</span></a></p>
            </div>

         </div>

         <div class="aside-header">
            ADVERTS</div>
         <div class="aside-body">
            <img src="https://i.imgur.com/XaKeYJE.png" alt="advert">
         </div>


      </aside>
      </div>
   </section>
   <footer class="footer">
      copyright @ Adebajo Oluwaseyi | Andela 2018
   </footer>
   <script>
      // get current page meetup Id
      let meetupId = new URLSearchParams(window.location.search).get('id');

      /* Populate current page with all meetups */
      fetch(`${localStorage.getItem('base_url')}/meetups/${meetupId}`, {
            headers: {
               'content-type': 'text/plain',
               'Authorization': `Bearer ${localStorage.getItem('token')}`,
            }
         })
         .then(response => response.json())
         .then(data => {
            // console.log(data);
            if (data.status === 200) {
               data.data.map(data => {
                  document.querySelector('#single-meetup-detail').innerHTML =
                     `
                        <div class="meetup-detail">
                                    <div class="meetup-banner"> <img src="${data.coverimage}" alt="">
                                    </div>
                                <div>
                                <h1 class="h1">${data.topic}</h1>
                                <div></div>
                                <p ><span class="bold"><i class="far fa-calendar"></i> Date:</span>    <span class="brown"> ${new Date(data.happeningon).toDateString()}</span>    </p>
                                <p><span class="bold"> <i class="fa fa-map-marker-alt"></i> Location:</span><span class="brown">${data.location}Lagos</span> </p>
                                <p ><span class="bold"> <i class="fa fa-user"></i> Host: </span>    <span class="brown">${data.host}</span>    </p>
                                <div><span class="bold"> <i class="fa fa-question-circle"></i> Question:</span>  <span class="brown"> ${data.qcount}  </span>  <span class="bold"><br> <i class="fa fa-check"></i> RSVPS: </span><span class="brown"> ${data.rsvpcount}</span> </div>
                                </div>
                            </div>
                                                <br>
                            
                            
                           
                            </div>
                        `
               })
            } else {
               alert('wrong login credential');
               `Bearer ${localStorage.getItem('token')}`
            }


         })
         .catch(error => console.log(error));


      /* Delete Current Meetup  */
      document.querySelector('#deleteMeetup').addEventListener('click', e => {

         e.preventDefault();
         const confirmDelete = confirm('Are you sure you want to delete? Action is non reversible');

         if(confirmDelete){
          
         

         fetch(`${localStorage.getItem('base_url')}/meetups/${meetupId}`, {
               headers: {
                  'Authorization': `Bearer ${localStorage.getItem('token')}`,
               },
               method: "Delete",
            })
            .then(response => response.json())
            .then(data => {
               console.log(data);

               if (data.status === 200) {

                  displayAlert('Meetup Delete Successful');
                        setTimeout(() => {
                            window.location.href = "../admin/meetups.html";
                            
                        }, 1000);


               } else {
                  document.getElementById('errorDiv').innerHTML = null;
                  data.error.forEach(error => {
                     document.getElementById('errorDiv').innerHTML +=
                        `
                          
                          <li>${error}</li>
                          `;
                  });

               }


            })
            .catch(error => console.log(error));
      }
      })
   </script>
   <script src="../js/general.js"></script>
   <script src="../js/user.js"></script>
</body>