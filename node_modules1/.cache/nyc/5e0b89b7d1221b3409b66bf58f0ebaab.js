var cov_1v32ks6kx6=function(){var path="C:\\Users\\OLUWASEYI\\Desktop\\API_Andela_Questioner\\controller\\Question.js",hash="43adf019589230637ae8aef8bc9982a1c9f869d2",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\OLUWASEYI\\Desktop\\API_Andela_Questioner\\controller\\Question.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:2,column:14},end:{line:2,column:40}},"2":{start:{line:3,column:12},end:{line:3,column:36}},"3":{start:{line:5,column:0},end:{line:29,column:1}},"4":{start:{line:6,column:23},end:{line:14,column:4}},"5":{start:{line:16,column:3},end:{line:28,column:4}},"6":{start:{line:17,column:6},end:{line:20,column:8}},"7":{start:{line:22,column:6},end:{line:22,column:34}},"8":{start:{line:23,column:6},end:{line:27,column:8}},"9":{start:{line:31,column:0},end:{line:85,column:1}},"10":{start:{line:33,column:3},end:{line:84,column:4}},"11":{start:{line:34,column:6},end:{line:37,column:8}},"12":{start:{line:40,column:23},end:{line:40,column:96}},"13":{start:{line:40,column:50},end:{line:40,column:95}},"14":{start:{line:42,column:6},end:{line:83,column:7}},"15":{start:{line:43,column:9},end:{line:46,column:11}},"16":{start:{line:48,column:9},end:{line:56,column:10}},"17":{start:{line:57,column:9},end:{line:57,column:25}},"18":{start:{line:58,column:9},end:{line:82,column:10}},"19":{start:{line:59,column:12},end:{line:59,column:48}},"20":{start:{line:60,column:12},end:{line:69,column:14}},"21":{start:{line:70,column:16},end:{line:82,column:10}},"22":{start:{line:71,column:12},end:{line:71,column:48}},"23":{start:{line:72,column:12},end:{line:81,column:14}},"24":{start:{line:86,column:0},end:{line:89,column:1}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:31},end:{line:29,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:31,column:15},end:{line:31,column:16}},loc:{start:{line:31,column:29},end:{line:85,column:1}},line:31},"2":{name:"(anonymous_2)",decl:{start:{line:40,column:38},end:{line:40,column:39}},loc:{start:{line:40,column:50},end:{line:40,column:95}},line:40}},branchMap:{"0":{loc:{start:{line:16,column:3},end:{line:28,column:4}},type:"if",locations:[{start:{line:16,column:3},end:{line:28,column:4}},{start:{line:16,column:3},end:{line:28,column:4}}],line:16},"1":{loc:{start:{line:16,column:7},end:{line:16,column:95}},type:"binary-expr",locations:[{start:{line:16,column:7},end:{line:16,column:25}},{start:{line:16,column:29},end:{line:16,column:46}},{start:{line:16,column:50},end:{line:16,column:72}},{start:{line:16,column:76},end:{line:16,column:95}}],line:16},"2":{loc:{start:{line:33,column:3},end:{line:84,column:4}},type:"if",locations:[{start:{line:33,column:3},end:{line:84,column:4}},{start:{line:33,column:3},end:{line:84,column:4}}],line:33},"3":{loc:{start:{line:33,column:7},end:{line:33,column:108}},type:"binary-expr",locations:[{start:{line:33,column:7},end:{line:33,column:29}},{start:{line:33,column:33},end:{line:33,column:49}},{start:{line:33,column:53},end:{line:33,column:67}},{start:{line:33,column:71},end:{line:33,column:86}},{start:{line:33,column:90},end:{line:33,column:108}}],line:33},"4":{loc:{start:{line:42,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:42,column:6},end:{line:83,column:7}},{start:{line:42,column:6},end:{line:83,column:7}}],line:42},"5":{loc:{start:{line:42,column:10},end:{line:42,column:38}},type:"binary-expr",locations:[{start:{line:42,column:10},end:{line:42,column:19}},{start:{line:42,column:23},end:{line:42,column:38}}],line:42},"6":{loc:{start:{line:58,column:9},end:{line:82,column:10}},type:"if",locations:[{start:{line:58,column:9},end:{line:82,column:10}},{start:{line:58,column:9},end:{line:82,column:10}}],line:58},"7":{loc:{start:{line:70,column:16},end:{line:82,column:10}},type:"if",locations:[{start:{line:70,column:16},end:{line:82,column:10}},{start:{line:70,column:16},end:{line:82,column:10}}],line:70}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0,0,0],"2":[0,0],"3":[0,0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();let Questions=(cov_1v32ks6kx6.s[0]++,require('../model/Question'));let Meetups=(cov_1v32ks6kx6.s[1]++,require('../model/Meetup'));let Votes=(cov_1v32ks6kx6.s[2]++,require('../model/Vote'));cov_1v32ks6kx6.s[3]++;createQuestion=(req,res)=>{cov_1v32ks6kx6.f[0]++;const newQuestion=(cov_1v32ks6kx6.s[4]++,{id:Date.now(),createdOn:new Date(),createdBy:req.body.userId,meetup:req.body.meetupId,title:req.body.title,body:req.body.body,votes:0});cov_1v32ks6kx6.s[5]++;if((cov_1v32ks6kx6.b[1][0]++,!newQuestion.title)||(cov_1v32ks6kx6.b[1][1]++,!newQuestion.body)||(cov_1v32ks6kx6.b[1][2]++,!newQuestion.createdBy)||(cov_1v32ks6kx6.b[1][3]++,!newQuestion.meetup)){cov_1v32ks6kx6.b[0][0]++;cov_1v32ks6kx6.s[6]++;res.json({status:400,error:'Bad request error, missing required data. Note: userId, MeetupId, title and body are required.'});}else{cov_1v32ks6kx6.b[0][1]++;cov_1v32ks6kx6.s[7]++;Questions.push(newQuestion);cov_1v32ks6kx6.s[8]++;res.json({status:201,message:'Your questions is  successfully created',data:newQuestion});}};cov_1v32ks6kx6.s[9]++;voteQuestion=(req,res)=>{cov_1v32ks6kx6.f[1]++;cov_1v32ks6kx6.s[10]++;if((cov_1v32ks6kx6.b[3][0]++,!req.params.questionId)||(cov_1v32ks6kx6.b[3][1]++,!req.body.userId)||(cov_1v32ks6kx6.b[3][2]++,!req.body.body)||(cov_1v32ks6kx6.b[3][3]++,!req.body.title)||(cov_1v32ks6kx6.b[3][4]++,!req.body.voteType)){cov_1v32ks6kx6.b[2][0]++;cov_1v32ks6kx6.s[11]++;res.json({status:400,error:'Bad Request, please include meetup Id, user id, title, body, vote type in your request as parameter'});}else{cov_1v32ks6kx6.b[2][1]++;const question=(cov_1v32ks6kx6.s[12]++,Questions.find(question=>{cov_1v32ks6kx6.f[2]++;cov_1v32ks6kx6.s[13]++;return question.id===Number(req.params.questionId);}));cov_1v32ks6kx6.s[14]++;if((cov_1v32ks6kx6.b[5][0]++,!question)||(cov_1v32ks6kx6.b[5][1]++,question===-1)){cov_1v32ks6kx6.b[4][0]++;cov_1v32ks6kx6.s[15]++;res.json({status:404,error:`question with id ${req.params.questionId} not found`});}else{cov_1v32ks6kx6.b[4][1]++;cov_1v32ks6kx6.s[16]++;vote={voteId:Date.now(),userId:res.body.userId,meetupId:res.body.meetupId,questionId:res.params.questionId,title:res.body.title,body:res.body.body,voteType:res.body.voteType};cov_1v32ks6kx6.s[17]++;Votes.push(vote);cov_1v32ks6kx6.s[18]++;if(req.body.voteType==='upvote'){cov_1v32ks6kx6.b[6][0]++;cov_1v32ks6kx6.s[19]++;question.votes=question.votes+1;cov_1v32ks6kx6.s[20]++;res.json({status:200,message:`Question upvoted`,data:[{meetup:vote.meetupId,title:vote.title,body:vote.body,votes:question.votes}]});}else{cov_1v32ks6kx6.b[6][1]++;cov_1v32ks6kx6.s[21]++;if(req.body.voteType==='downvote'){cov_1v32ks6kx6.b[7][0]++;cov_1v32ks6kx6.s[22]++;question.votes=question.votes-1;cov_1v32ks6kx6.s[23]++;res.json({status:200,message:`Question upvoted`,data:[{meetup:vote.meetupId,title:vote.title,body:vote.body,votes:question.votes}]});}else{cov_1v32ks6kx6.b[7][1]++;}}}}};cov_1v32ks6kx6.s[24]++;module.exports={createQuestion,voteQuestion};